<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Conductor - Self-Orchestrating Lifecycle Demo</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', system-ui, sans-serif;
            background: #0a0a0a;
            color: white;
            overflow-x: hidden;
            position: relative;
        }

        /* Matrix rain background */
        #matrix {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.1;
            z-index: 1;
        }

        .container {
            position: relative;
            z-index: 2;
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            animation: fadeDown 1s ease-out;
        }

        @keyframes fadeDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #00ff88, #0088ff, #ff0088);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 3s ease infinite;
        }

        @keyframes gradient {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(180deg); }
        }

        .control-panel {
            background: rgba(20, 20, 30, 0.9);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
        }

        .controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #00ff88 0%, #0088ff 100%);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn.danger {
            background: linear-gradient(135deg, #ff0044 0%, #ff8800 100%);
        }

        .btn.stop {
            background: linear-gradient(135deg, #666 0%, #444 100%);
        }

        /* Main orchestration view */
        .orchestration-container {
            display: grid;
            grid-template-columns: 300px 1fr 300px;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        /* BRD Input Panel */
        .brd-panel {
            background: rgba(20, 20, 30, 0.9);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
        }

        .brd-panel h3 {
            margin-bottom: 1rem;
            color: #00ff88;
        }

        .brd-item {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.2);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .brd-item:hover {
            background: rgba(0, 255, 136, 0.2);
            transform: translateX(5px);
        }

        .brd-item.active {
            background: rgba(0, 255, 136, 0.3);
            border-color: #00ff88;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
        }

        /* Phase Pipeline */
        .pipeline-container {
            background: rgba(20, 20, 30, 0.9);
            border: 1px solid rgba(0, 136, 255, 0.3);
            border-radius: 12px;
            padding: 2rem;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .pipeline {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3rem;
            position: relative;
        }

        .pipeline::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #00ff88, #0088ff, #ff0088);
            transform: translateY(-50%);
            z-index: 0;
        }

        .phase {
            background: #1a1a2e;
            border: 2px solid #333;
            border-radius: 12px;
            padding: 1rem;
            width: 120px;
            text-align: center;
            position: relative;
            z-index: 1;
            transition: all 0.3s ease;
        }

        .phase.active {
            background: linear-gradient(135deg, #0088ff 0%, #00ff88 100%);
            border-color: #00ff88;
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
            animation: pulse 2s infinite;
        }

        .phase.complete {
            background: linear-gradient(135deg, #00ff88 0%, #00aa66 100%);
            border-color: #00ff88;
        }

        .phase.pending {
            opacity: 0.5;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1.1); }
            50% { transform: scale(1.15); }
        }

        .phase-number {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .phase-name {
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .phase-status {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        /* Agent Activity */
        .agent-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 2rem;
        }

        .agent-card {
            background: rgba(0, 136, 255, 0.1);
            border: 1px solid rgba(0, 136, 255, 0.3);
            border-radius: 8px;
            padding: 1rem;
            transition: all 0.3s ease;
        }

        .agent-card.active {
            background: rgba(0, 136, 255, 0.2);
            border-color: #0088ff;
            animation: agentPulse 1s infinite;
        }

        @keyframes agentPulse {
            0%, 100% { box-shadow: 0 0 10px rgba(0, 136, 255, 0.5); }
            50% { box-shadow: 0 0 20px rgba(0, 136, 255, 0.8); }
        }

        .agent-name {
            font-weight: bold;
            color: #0088ff;
            margin-bottom: 0.5rem;
        }

        .agent-task {
            font-size: 0.9rem;
            color: #ccc;
            margin-bottom: 0.5rem;
        }

        .agent-progress {
            height: 4px;
            background: rgba(0, 136, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .agent-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #0088ff, #00ff88);
            transition: width 0.5s ease;
        }

        /* Output Panel */
        .output-panel {
            background: rgba(20, 20, 30, 0.9);
            border: 1px solid rgba(255, 0, 136, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
        }

        .output-panel h3 {
            margin-bottom: 1rem;
            color: #ff0088;
        }

        .artifact {
            background: rgba(255, 0, 136, 0.1);
            border: 1px solid rgba(255, 0, 136, 0.2);
            border-radius: 8px;
            padding: 0.75rem;
            margin-bottom: 0.75rem;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .artifact.code { border-left: 3px solid #0088ff; }
        .artifact.test { border-left: 3px solid #00ff88; }
        .artifact.doc { border-left: 3px solid #ff0088; }
        .artifact.deploy { border-left: 3px solid #ffaa00; }

        /* Terminal */
        .terminal {
            background: #000;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 1rem;
            font-family: 'SF Mono', 'Monaco', monospace;
            font-size: 0.9rem;
            height: 300px;
            overflow-y: auto;
            margin-top: 2rem;
        }

        .terminal-line {
            margin-bottom: 0.5rem;
            animation: typein 0.5s ease-out;
        }

        @keyframes typein {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .terminal-line.success { color: #00ff88; }
        .terminal-line.info { color: #0088ff; }
        .terminal-line.warning { color: #ffaa00; }
        .terminal-line.error { color: #ff0044; }

        /* Metrics Dashboard */
        .metrics-dashboard {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .metric {
            background: rgba(20, 20, 30, 0.9);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: #00ff88;
        }

        .metric-label {
            font-size: 0.8rem;
            opacity: 0.7;
            text-transform: uppercase;
            margin-top: 0.5rem;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 255, 136, 0.9);
            color: #000;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            animation: slideInRight 0.5s ease-out;
            z-index: 1000;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Loading animation */
        .loader {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(0, 255, 136, 0.3);
            border-top-color: #00ff88;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <canvas id="matrix"></canvas>

    <div class="container">
        <div class="header">
            <h1>🎯 Project Conductor</h1>
            <p style="font-size: 1.5rem; opacity: 0.9;">Self-Orchestrating Requirements → Implementation</p>
            <p style="font-size: 1.2rem; opacity: 0.7; margin-top: 1rem;">Watch the system build itself autonomously</p>
        </div>

        <!-- Control Panel -->
        <div class="control-panel">
            <div class="controls">
                <button class="btn" onclick="startOrchestration()">🚀 Start Full Lifecycle</button>
                <button class="btn" onclick="simulateBRD()">📋 Load BRD</button>
                <button class="btn" onclick="runPhase()">⚡ Run Next Phase</button>
                <button class="btn danger" onclick="simulateChange()">🔄 Simulate Change</button>
                <button class="btn stop" onclick="stopOrchestration()">⏹ Stop</button>
                <button class="btn" onclick="reset()">🔄 Reset Demo</button>
            </div>
        </div>

        <!-- Metrics Dashboard -->
        <div class="metrics-dashboard">
            <div class="metric">
                <div class="metric-value" id="reqCount">0</div>
                <div class="metric-label">Requirements</div>
            </div>
            <div class="metric">
                <div class="metric-value" id="phaseNum">0</div>
                <div class="metric-label">Current Phase</div>
            </div>
            <div class="metric">
                <div class="metric-value" id="agentCount">0</div>
                <div class="metric-label">Active Agents</div>
            </div>
            <div class="metric">
                <div class="metric-value" id="testCount">0</div>
                <div class="metric-label">Tests Passing</div>
            </div>
            <div class="metric">
                <div class="metric-value" id="coverage">0%</div>
                <div class="metric-label">Coverage</div>
            </div>
            <div class="metric">
                <div class="metric-value" id="timeElapsed">00:00</div>
                <div class="metric-label">Time Elapsed</div>
            </div>
        </div>

        <!-- Main Orchestration View -->
        <div class="orchestration-container">
            <!-- BRD Input -->
            <div class="brd-panel">
                <h3>📋 Business Requirements</h3>
                <div id="brdList">
                    <div class="brd-item">
                        <strong>E-Commerce Platform</strong>
                        <div style="font-size: 0.9rem; opacity: 0.8; margin-top: 0.5rem;">
                            User authentication, product catalog, shopping cart, payment processing
                        </div>
                    </div>
                    <div class="brd-item">
                        <strong>Real-time Analytics</strong>
                        <div style="font-size: 0.9rem; opacity: 0.8; margin-top: 0.5rem;">
                            Dashboard, metrics collection, alerting, reporting
                        </div>
                    </div>
                    <div class="brd-item">
                        <strong>Mobile App</strong>
                        <div style="font-size: 0.9rem; opacity: 0.8; margin-top: 0.5rem;">
                            iOS/Android support, offline mode, push notifications
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pipeline -->
            <div class="pipeline-container">
                <h3 style="text-align: center; margin-bottom: 2rem; color: #0088ff;">
                    Orchestration Pipeline
                </h3>

                <div class="pipeline">
                    <div class="phase" id="phase0">
                        <div class="phase-number">0</div>
                        <div class="phase-name">Setup</div>
                        <div class="phase-status">Pending</div>
                    </div>
                    <div class="phase" id="phase1">
                        <div class="phase-number">1</div>
                        <div class="phase-name">Requirements</div>
                        <div class="phase-status">Pending</div>
                    </div>
                    <div class="phase" id="phase2">
                        <div class="phase-number">2</div>
                        <div class="phase-name">Design</div>
                        <div class="phase-status">Pending</div>
                    </div>
                    <div class="phase" id="phase3">
                        <div class="phase-number">3</div>
                        <div class="phase-name">Implementation</div>
                        <div class="phase-status">Pending</div>
                    </div>
                    <div class="phase" id="phase4">
                        <div class="phase-number">4</div>
                        <div class="phase-name">Testing</div>
                        <div class="phase-status">Pending</div>
                    </div>
                    <div class="phase" id="phase5">
                        <div class="phase-number">5</div>
                        <div class="phase-name">Deployment</div>
                        <div class="phase-status">Pending</div>
                    </div>
                </div>

                <!-- Active Agents -->
                <div class="agent-grid" id="agentGrid">
                    <div class="agent-card">
                        <div class="agent-name">🤖 Agent-Requirements</div>
                        <div class="agent-task">Waiting...</div>
                        <div class="agent-progress">
                            <div class="agent-progress-bar" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="agent-card">
                        <div class="agent-name">🎨 Agent-Design</div>
                        <div class="agent-task">Waiting...</div>
                        <div class="agent-progress">
                            <div class="agent-progress-bar" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="agent-card">
                        <div class="agent-name">💻 Agent-Code</div>
                        <div class="agent-task">Waiting...</div>
                        <div class="agent-progress">
                            <div class="agent-progress-bar" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="agent-card">
                        <div class="agent-name">🧪 Agent-Test</div>
                        <div class="agent-task">Waiting...</div>
                        <div class="agent-progress">
                            <div class="agent-progress-bar" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="agent-card">
                        <div class="agent-name">📊 Agent-Quality</div>
                        <div class="agent-task">Waiting...</div>
                        <div class="agent-progress">
                            <div class="agent-progress-bar" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="agent-card">
                        <div class="agent-name">🚀 Agent-Deploy</div>
                        <div class="agent-task">Waiting...</div>
                        <div class="agent-progress">
                            <div class="agent-progress-bar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Output -->
            <div class="output-panel">
                <h3>📦 Generated Artifacts</h3>
                <div id="artifactsList">
                    <div style="text-align: center; opacity: 0.5; padding: 2rem;">
                        No artifacts yet. Start orchestration to begin.
                    </div>
                </div>
            </div>
        </div>

        <!-- Terminal -->
        <div class="terminal" id="terminal">
            <div class="terminal-line info">$ conductor init</div>
            <div class="terminal-line">Project Conductor v1.0.0</div>
            <div class="terminal-line">Ready for orchestration...</div>
        </div>
    </div>

    <script>
        // State
        let isRunning = false;
        let currentPhase = -1;
        let orchestrationInterval = null;
        let startTime = null;
        let artifacts = [];
        let requirements = [];
        let activeAgents = new Set();

        // Matrix rain effect
        const canvas = document.getElementById('matrix');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const columns = Math.floor(canvas.width / 20);
        const drops = Array(columns).fill(0);

        function drawMatrix() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#00ff88';
            ctx.font = '15px monospace';

            for (let i = 0; i < drops.length; i++) {
                const text = Math.random() > 0.5 ? '1' : '0';
                ctx.fillText(text, i * 20, drops[i] * 20);

                if (drops[i] * 20 > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }

        setInterval(drawMatrix, 50);

        // Terminal logging
        function log(message, type = 'info') {
            const terminal = document.getElementById('terminal');
            const line = document.createElement('div');
            line.className = `terminal-line ${type}`;
            line.textContent = message;
            terminal.appendChild(line);
            terminal.scrollTop = terminal.scrollHeight;
        }

        // Show notification
        function notify(message) {
            const existing = document.querySelector('.notification');
            if (existing) existing.remove();

            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => notification.remove(), 3000);
        }

        // Start orchestration
        function startOrchestration() {
            if (isRunning) return;

            isRunning = true;
            currentPhase = -1;
            startTime = Date.now();

            log('🚀 Starting full lifecycle orchestration...', 'success');
            notify('Orchestration Started!');

            // Simulate BRD loading first
            setTimeout(() => simulateBRD(), 500);

            // Run phases automatically
            orchestrationInterval = setInterval(() => {
                if (currentPhase < 5) {
                    runPhase();
                } else {
                    stopOrchestration();
                    log('✅ Orchestration complete! System ready for production.', 'success');
                    notify('System Successfully Built!');
                }
            }, 3000);
        }

        // Simulate BRD loading
        function simulateBRD() {
            log('📋 Loading Business Requirements Document...', 'info');

            const brdItems = document.querySelectorAll('.brd-item');
            brdItems.forEach((item, index) => {
                setTimeout(() => {
                    item.classList.add('active');

                    // Generate requirements
                    const reqTitles = [
                        'User Authentication', 'Product Catalog', 'Shopping Cart',
                        'Payment Processing', 'Order Management', 'Inventory Tracking'
                    ];

                    requirements.push({
                        id: `REQ-2024-${String(index + 1).padStart(3, '0')}`,
                        title: reqTitles[index] || `Requirement ${index + 1}`,
                        status: 'draft'
                    });

                    updateMetrics();
                    log(`  ✓ Loaded: ${item.querySelector('strong').textContent}`, 'success');
                }, index * 200);
            });

            setTimeout(() => {
                log('📊 BRD Analysis Complete: 24 requirements identified', 'info');
                document.getElementById('reqCount').textContent = '24';
            }, 1000);
        }

        // Run next phase
        function runPhase() {
            currentPhase++;
            if (currentPhase > 5) return;

            const phases = [
                { name: 'Infrastructure Setup', agents: ['Agent-Requirements'], duration: 2000 },
                { name: 'Requirements Analysis', agents: ['Agent-Requirements', 'Agent-Quality'], duration: 3000 },
                { name: 'System Design', agents: ['Agent-Design', 'Agent-Requirements'], duration: 3000 },
                { name: 'Implementation', agents: ['Agent-Code', 'Agent-Test'], duration: 4000 },
                { name: 'Testing & Quality', agents: ['Agent-Test', 'Agent-Quality'], duration: 3000 },
                { name: 'Deployment', agents: ['Agent-Deploy'], duration: 2000 }
            ];

            const phase = phases[currentPhase];
            const phaseElement = document.getElementById(`phase${currentPhase}`);

            // Update phase status
            document.querySelectorAll('.phase').forEach(p => {
                p.classList.remove('active');
                if (p.id === `phase${currentPhase}`) {
                    p.classList.add('active');
                } else if (parseInt(p.id.replace('phase', '')) < currentPhase) {
                    p.classList.add('complete');
                }
            });

            phaseElement.querySelector('.phase-status').textContent = 'Running...';

            log(`\n⚡ PHASE ${currentPhase}: ${phase.name}`, 'warning');
            notify(`Phase ${currentPhase}: ${phase.name}`);

            // Activate agents
            activateAgents(phase.agents);

            // Simulate phase work
            simulatePhaseWork(currentPhase);

            // Complete phase
            setTimeout(() => {
                phaseElement.querySelector('.phase-status').textContent = 'Complete';
                phaseElement.classList.remove('active');
                phaseElement.classList.add('complete');

                log(`  ✅ Phase ${currentPhase} complete`, 'success');
                updateMetrics();
            }, phase.duration);
        }

        // Activate agents
        function activateAgents(agentNames) {
            const agentCards = document.querySelectorAll('.agent-card');

            // Reset all agents
            agentCards.forEach(card => {
                card.classList.remove('active');
                card.querySelector('.agent-task').textContent = 'Waiting...';
                card.querySelector('.agent-progress-bar').style.width = '0%';
            });

            // Activate specified agents
            agentNames.forEach(name => {
                const card = Array.from(agentCards).find(c =>
                    c.querySelector('.agent-name').textContent.includes(name.replace('Agent-', ''))
                );

                if (card) {
                    card.classList.add('active');
                    activeAgents.add(name);

                    // Animate progress
                    let progress = 0;
                    const progressBar = card.querySelector('.agent-progress-bar');
                    const taskElement = card.querySelector('.agent-task');

                    const tasks = [
                        'Analyzing requirements...',
                        'Generating artifacts...',
                        'Running validations...',
                        'Optimizing output...',
                        'Complete!'
                    ];

                    let taskIndex = 0;
                    const progressInterval = setInterval(() => {
                        progress += 20;
                        progressBar.style.width = `${progress}%`;

                        if (taskIndex < tasks.length) {
                            taskElement.textContent = tasks[taskIndex];
                            taskIndex++;
                        }

                        if (progress >= 100) {
                            clearInterval(progressInterval);
                            setTimeout(() => {
                                card.classList.remove('active');
                                activeAgents.delete(name);
                            }, 1000);
                        }
                    }, 500);
                }
            });

            document.getElementById('agentCount').textContent = activeAgents.size;
        }

        // Simulate phase work
        function simulatePhaseWork(phase) {
            const phaseArtifacts = {
                0: [
                    { type: 'doc', name: '/.conductor/state.json', desc: 'Orchestration state initialized' },
                    { type: 'code', name: 'docker-compose.yml', desc: 'Infrastructure configured' }
                ],
                1: [
                    { type: 'doc', name: 'requirements.md', desc: '24 requirements documented' },
                    { type: 'code', name: 'models/requirement.ts', desc: 'Data models created' }
                ],
                2: [
                    { type: 'doc', name: 'system-design.md', desc: 'Architecture documented' },
                    { type: 'code', name: 'api/routes.ts', desc: 'API design complete' }
                ],
                3: [
                    { type: 'code', name: 'services/requirements.service.ts', desc: 'Core service implemented' },
                    { type: 'code', name: 'controllers/requirements.controller.ts', desc: 'REST API complete' }
                ],
                4: [
                    { type: 'test', name: 'tests/requirements.test.ts', desc: '142 tests passing' },
                    { type: 'doc', name: 'coverage/report.html', desc: '87% code coverage' }
                ],
                5: [
                    { type: 'deploy', name: 'Dockerfile', desc: 'Container ready' },
                    { type: 'deploy', name: '.github/workflows/deploy.yml', desc: 'CI/CD pipeline active' }
                ]
            };

            const artifacts = phaseArtifacts[phase] || [];
            artifacts.forEach((artifact, index) => {
                setTimeout(() => {
                    addArtifact(artifact);
                    log(`  📦 Generated: ${artifact.name}`, 'success');
                }, (index + 1) * 500);
            });

            // Update test count
            if (phase >= 3) {
                let tests = 0;
                const testInterval = setInterval(() => {
                    tests += Math.floor(Math.random() * 20) + 10;
                    document.getElementById('testCount').textContent = tests;

                    if (tests > 142) {
                        clearInterval(testInterval);
                        document.getElementById('testCount').textContent = '142';
                    }
                }, 200);
            }

            // Update coverage
            if (phase >= 4) {
                document.getElementById('coverage').textContent = '87%';
            }
        }

        // Add artifact
        function addArtifact(artifact) {
            const list = document.getElementById('artifactsList');

            if (list.querySelector('.artifact') === null) {
                list.innerHTML = '';
            }

            const element = document.createElement('div');
            element.className = `artifact ${artifact.type}`;
            element.innerHTML = `
                <strong>${artifact.name}</strong>
                <div style="font-size: 0.8rem; opacity: 0.8;">${artifact.desc}</div>
            `;

            list.appendChild(element);
            artifacts.push(artifact);
        }

        // Simulate change
        function simulateChange() {
            log('\n🔄 CHANGE DETECTED: Payment provider updated from Stripe to PayPal', 'warning');
            notify('Change Detected - Orchestrating Updates');

            log('  🔍 Analyzing impact...', 'info');

            setTimeout(() => {
                log('  ⚠️  3 requirements affected', 'warning');
                log('  ⚠️  5 code files need updates', 'warning');
                log('  ⚠️  12 tests need modification', 'warning');
            }, 500);

            setTimeout(() => {
                log('  🤖 Deploying agents to handle changes...', 'info');
                activateAgents(['Agent-Requirements', 'Agent-Code', 'Agent-Test']);
            }, 1000);

            setTimeout(() => {
                log('  ✅ Changes propagated successfully', 'success');
                log('  ✅ All tests passing', 'success');
                notify('Change Successfully Integrated');
            }, 3000);
        }

        // Stop orchestration
        function stopOrchestration() {
            isRunning = false;
            if (orchestrationInterval) {
                clearInterval(orchestrationInterval);
                orchestrationInterval = null;
            }
            log('⏹ Orchestration stopped', 'warning');
        }

        // Reset demo
        function reset() {
            stopOrchestration();
            currentPhase = -1;
            artifacts = [];
            requirements = [];
            activeAgents.clear();

            // Reset UI
            document.querySelectorAll('.phase').forEach(p => {
                p.classList.remove('active', 'complete', 'pending');
                p.querySelector('.phase-status').textContent = 'Pending';
            });

            document.querySelectorAll('.brd-item').forEach(item => {
                item.classList.remove('active');
            });

            document.querySelectorAll('.agent-card').forEach(card => {
                card.classList.remove('active');
                card.querySelector('.agent-task').textContent = 'Waiting...';
                card.querySelector('.agent-progress-bar').style.width = '0%';
            });

            document.getElementById('artifactsList').innerHTML = `
                <div style="text-align: center; opacity: 0.5; padding: 2rem;">
                    No artifacts yet. Start orchestration to begin.
                </div>
            `;

            document.getElementById('terminal').innerHTML = `
                <div class="terminal-line info">$ conductor init</div>
                <div class="terminal-line">Project Conductor v1.0.0</div>
                <div class="terminal-line">Ready for orchestration...</div>
            `;

            updateMetrics();
            log('🔄 Demo reset complete', 'info');
        }

        // Update metrics
        function updateMetrics() {
            document.getElementById('phaseNum').textContent = Math.max(0, currentPhase);
            document.getElementById('agentCount').textContent = activeAgents.size;

            if (startTime) {
                const elapsed = Date.now() - startTime;
                const minutes = Math.floor(elapsed / 60000);
                const seconds = Math.floor((elapsed % 60000) / 1000);
                document.getElementById('timeElapsed').textContent =
                    `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }
        }

        // Update timer
        setInterval(() => {
            if (isRunning && startTime) {
                updateMetrics();
            }
        }, 1000);

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case ' ':
                    e.preventDefault();
                    if (!isRunning) startOrchestration();
                    else stopOrchestration();
                    break;
                case 'r':
                    reset();
                    break;
                case 'Enter':
                    if (!isRunning) runPhase();
                    break;
            }
        });

        // Initial state
        log('Press SPACE to start orchestration or use the buttons above', 'info');
    </script>
</body>
</html>