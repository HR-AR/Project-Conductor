<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 4: Implementation Orchestration - Project Conductor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #0a0a0a;
            color: #00ff41;
            overflow-x: hidden;
            position: relative;
        }

        /* Matrix Rain Background */
        #matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.05;
            pointer-events: none;
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            border: 2px solid #00ff41;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.3);
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(0, 255, 65, 0.8);
        }

        .subtitle {
            color: #00ccff;
            font-size: 1.2em;
            margin-top: 10px;
        }

        .websocket-status {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            padding: 8px 16px;
            background: rgba(0, 255, 65, 0.1);
            border: 1px solid #00ff41;
            border-radius: 20px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            background: #00ff41;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; box-shadow: 0 0 10px #00ff41; }
            50% { opacity: 0.5; box-shadow: 0 0 5px #00ff41; }
        }

        /* Phase Pipeline */
        .pipeline {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin-bottom: 40px;
            overflow-x: auto;
            padding: 20px;
            background: rgba(26, 26, 26, 0.8);
            border: 2px solid #00ff41;
            border-radius: 10px;
        }

        .phase {
            flex: 1;
            min-width: 200px;
            background: #1a1a1a;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 15px;
            position: relative;
            transition: all 0.3s ease;
        }

        .phase:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0, 255, 65, 0.3);
        }

        .phase.complete {
            border-color: #00ff41;
            background: rgba(0, 255, 65, 0.1);
        }

        .phase.in-progress {
            border-color: #00ccff;
            background: rgba(0, 204, 255, 0.1);
            animation: glow 2s infinite;
        }

        .phase.failed {
            border-color: #ff0044;
            background: rgba(255, 0, 68, 0.1);
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px rgba(0, 204, 255, 0.5); }
            50% { box-shadow: 0 0 20px rgba(0, 204, 255, 0.8); }
        }

        .phase-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .phase-title {
            font-size: 1em;
            font-weight: bold;
            color: #00ff41;
        }

        .phase-status {
            font-size: 0.8em;
            padding: 3px 8px;
            background: #333;
            border-radius: 4px;
        }

        .phase.complete .phase-status { background: #00ff41; color: #000; }
        .phase.in-progress .phase-status { background: #00ccff; color: #000; }
        .phase.failed .phase-status { background: #ff0044; color: #fff; }

        .phase-progress {
            margin: 10px 0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #333;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff41, #00ccff);
            transition: width 0.5s ease;
        }

        .phase-info {
            font-size: 0.8em;
            color: #888;
            margin-top: 8px;
        }

        .phase-agent {
            color: #00ccff;
            margin: 5px 0;
        }

        .phase-duration {
            color: #ff9900;
        }

        .phase-logs {
            margin-top: 10px;
            padding: 8px;
            background: #0a0a0a;
            border: 1px solid #333;
            border-radius: 4px;
            font-size: 0.75em;
            max-height: 100px;
            overflow-y: auto;
            cursor: pointer;
        }

        .phase-logs:hover {
            border-color: #00ff41;
        }

        /* Main Grid Layout */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Agents Dashboard */
        .section {
            background: rgba(26, 26, 26, 0.8);
            border: 2px solid #00ff41;
            border-radius: 10px;
            padding: 20px;
        }

        .section-title {
            font-size: 1.5em;
            margin-bottom: 15px;
            color: #00ccff;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .agent-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .agent-card {
            background: #1a1a1a;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 15px;
            transition: all 0.3s ease;
        }

        .agent-card:hover {
            border-color: #00ff41;
            transform: translateY(-3px);
        }

        .agent-card.active {
            border-color: #00ccff;
            box-shadow: 0 0 15px rgba(0, 204, 255, 0.3);
        }

        .agent-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .agent-name {
            font-weight: bold;
            color: #00ff41;
        }

        .agent-status-icon {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #888;
        }

        .agent-status-icon.active {
            background: #00ccff;
            animation: pulse 1.5s infinite;
        }

        .agent-status-icon.complete {
            background: #00ff41;
        }

        .agent-task {
            font-size: 0.9em;
            color: #00ccff;
            margin: 8px 0;
        }

        .agent-files {
            font-size: 0.75em;
            color: #888;
            margin: 8px 0;
        }

        .agent-logs {
            font-size: 0.7em;
            background: #0a0a0a;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 8px;
            max-height: 80px;
            overflow-y: auto;
            margin-top: 8px;
        }

        .log-line {
            margin: 2px 0;
            color: #888;
        }

        .log-line.success { color: #00ff41; }
        .log-line.error { color: #ff0044; }
        .log-line.warning { color: #ff9900; }

        /* Artifacts Panel */
        .artifacts-tree {
            font-size: 0.9em;
            background: #0a0a0a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
        }

        .tree-item {
            padding: 5px;
            margin: 2px 0;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .tree-item:hover {
            background: rgba(0, 255, 65, 0.1);
            padding-left: 10px;
        }

        .tree-folder {
            color: #00ccff;
            font-weight: bold;
        }

        .tree-file {
            color: #00ff41;
            padding-left: 20px;
        }

        .tree-file::before {
            content: "üìÑ ";
        }

        .tree-folder::before {
            content: "üìÅ ";
        }

        /* Test Results */
        .test-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .test-stat {
            background: #1a1a1a;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .test-stat.passing { border-color: #00ff41; }
        .test-stat.failing { border-color: #ff0044; }
        .test-stat.coverage { border-color: #00ccff; }

        .test-stat-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .test-stat.passing .test-stat-value { color: #00ff41; }
        .test-stat.failing .test-stat-value { color: #ff0044; }
        .test-stat.coverage .test-stat-value { color: #00ccff; }

        .test-stat-label {
            font-size: 0.8em;
            color: #888;
        }

        .test-details {
            background: #0a0a0a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
        }

        .test-suite {
            margin-bottom: 15px;
        }

        .test-suite-header {
            font-weight: bold;
            color: #00ccff;
            margin-bottom: 5px;
        }

        .test-case {
            padding: 5px 10px;
            margin: 3px 0;
            border-left: 3px solid #333;
            font-size: 0.85em;
        }

        .test-case.pass {
            border-left-color: #00ff41;
            color: #00ff41;
        }

        .test-case.fail {
            border-left-color: #ff0044;
            color: #ff0044;
            cursor: pointer;
        }

        .test-case.fail:hover {
            background: rgba(255, 0, 68, 0.1);
        }

        /* Deployment Status */
        .health-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .health-item {
            background: #1a1a1a;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .health-item.healthy {
            border-color: #00ff41;
        }

        .health-icon {
            font-size: 1.5em;
        }

        .health-info {
            flex: 1;
        }

        .health-name {
            font-weight: bold;
            color: #00ff41;
        }

        .health-status {
            font-size: 0.8em;
            color: #888;
        }

        .deployment-log {
            background: #0a0a0a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px;
            max-height: 250px;
            overflow-y: auto;
            font-size: 0.85em;
        }

        /* API Explorer */
        .api-explorer {
            background: #0a0a0a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px;
        }

        .api-request {
            margin-bottom: 15px;
        }

        .api-method {
            display: inline-block;
            padding: 4px 8px;
            background: #00ff41;
            color: #000;
            font-weight: bold;
            border-radius: 4px;
            margin-right: 10px;
        }

        .api-method.post {
            background: #00ccff;
        }

        .api-endpoint {
            color: #00ff41;
            font-family: monospace;
        }

        .api-try-button {
            background: #00ccff;
            color: #000;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .api-try-button:hover {
            background: #00ff41;
            transform: scale(1.05);
        }

        .api-response {
            background: #1a1a1a;
            border: 1px solid #00ff41;
            border-radius: 4px;
            padding: 10px;
            margin-top: 10px;
            font-size: 0.8em;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
        }

        /* Control Panel */
        .control-panel {
            background: rgba(26, 26, 26, 0.8);
            border: 2px solid #00ff41;
            border-radius: 10px;
            padding: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            align-items: center;
        }

        .control-button {
            background: linear-gradient(135deg, #00ff41, #00ccff);
            color: #000;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 255, 65, 0.3);
        }

        .control-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 255, 65, 0.5);
        }

        .control-button:active {
            transform: translateY(-1px);
        }

        .control-button.secondary {
            background: #333;
            color: #00ff41;
        }

        .control-button.danger {
            background: #ff0044;
            color: #fff;
        }

        /* Confetti Animation */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #00ff41;
            position: absolute;
            animation: confetti-fall 3s linear;
            z-index: 1000;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a1a;
        }

        ::-webkit-scrollbar-thumb {
            background: #00ff41;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #00ccff;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
        }

        .modal-content {
            background: #1a1a1a;
            border: 2px solid #00ff41;
            border-radius: 10px;
            margin: 5% auto;
            padding: 20px;
            width: 80%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close-modal {
            color: #00ff41;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close-modal:hover {
            color: #00ccff;
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .pipeline {
                flex-direction: column;
            }

            .agent-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <canvas id="matrix-bg"></canvas>

    <div class="container">
        <header>
            <h1>‚ö° IMPLEMENTATION ORCHESTRATION ‚ö°</h1>
            <div class="subtitle">PRD ‚Üí Running Code Pipeline</div>
            <div class="websocket-status">
                <div class="status-indicator"></div>
                <span>WebSocket Connected ‚Ä¢ Live Updates Active</span>
            </div>
        </header>

        <!-- Phase Pipeline -->
        <div class="pipeline">
            <div class="phase complete" data-phase="0">
                <div class="phase-header">
                    <div class="phase-title">Phase 0: Setup</div>
                    <div class="phase-status">Complete</div>
                </div>
                <div class="phase-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%"></div>
                    </div>
                </div>
                <div class="phase-info">
                    <div class="phase-agent">Agent: Agent-Infrastructure</div>
                    <div class="phase-duration">Duration: 2m 34s</div>
                </div>
                <div class="phase-logs" onclick="showLogs('Phase 0')">
                    Docker compose up ‚úì<br>
                    Database migrations ‚úì<br>
                    Redis connected ‚úì
                </div>
            </div>

            <div class="phase complete" data-phase="1">
                <div class="phase-header">
                    <div class="phase-title">Phase 1: Requirements</div>
                    <div class="phase-status">Complete</div>
                </div>
                <div class="phase-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%"></div>
                    </div>
                </div>
                <div class="phase-info">
                    <div class="phase-agent">Agent: Agent-Requirements</div>
                    <div class="phase-duration">Duration: 5m 12s</div>
                </div>
                <div class="phase-logs" onclick="showLogs('Phase 1')">
                    Data models created ‚úì<br>
                    CRUD APIs implemented ‚úì<br>
                    Validation layer added ‚úì
                </div>
            </div>

            <div class="phase in-progress" data-phase="2">
                <div class="phase-header">
                    <div class="phase-title">Phase 2: Design</div>
                    <div class="phase-status">In Progress</div>
                </div>
                <div class="phase-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 67%"></div>
                    </div>
                </div>
                <div class="phase-info">
                    <div class="phase-agent">Agent: Agent-Design</div>
                    <div class="phase-duration">Duration: 3m 45s</div>
                </div>
                <div class="phase-logs" onclick="showLogs('Phase 2')">
                    Generating database schema...<br>
                    Creating architecture diagrams...<br>
                    Defining API contracts...
                </div>
            </div>

            <div class="phase" data-phase="3">
                <div class="phase-header">
                    <div class="phase-title">Phase 3: Implementation</div>
                    <div class="phase-status">Pending</div>
                </div>
                <div class="phase-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
                <div class="phase-info">
                    <div class="phase-agent">Agent: Agent-Code</div>
                    <div class="phase-duration">Duration: --</div>
                </div>
                <div class="phase-logs" onclick="showLogs('Phase 3')">
                    Awaiting Phase 2 completion...
                </div>
            </div>

            <div class="phase" data-phase="4">
                <div class="phase-header">
                    <div class="phase-title">Phase 4: Testing</div>
                    <div class="phase-status">Pending</div>
                </div>
                <div class="phase-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
                <div class="phase-info">
                    <div class="phase-agent">Agent: Agent-Test</div>
                    <div class="phase-duration">Duration: --</div>
                </div>
                <div class="phase-logs" onclick="showLogs('Phase 4')">
                    Awaiting Phase 3 completion...
                </div>
            </div>

            <div class="phase" data-phase="5">
                <div class="phase-header">
                    <div class="phase-title">Phase 5: Deployment</div>
                    <div class="phase-status">Pending</div>
                </div>
                <div class="phase-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
                <div class="phase-info">
                    <div class="phase-agent">Agent: Agent-Deploy</div>
                    <div class="phase-duration">Duration: --</div>
                </div>
                <div class="phase-logs" onclick="showLogs('Phase 5')">
                    Awaiting Phase 4 completion...
                </div>
            </div>
        </div>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- Agents Dashboard -->
            <div class="section">
                <div class="section-title">ü§ñ Active Agents Dashboard</div>
                <div class="agent-grid">
                    <div class="agent-card active">
                        <div class="agent-header">
                            <div class="agent-name">Agent-Requirements</div>
                            <div class="agent-status-icon complete"></div>
                        </div>
                        <div class="agent-task">‚úì Creating data models</div>
                        <div class="agent-files">
                            Files: requirement.ts, link.ts, audit.ts
                        </div>
                        <div class="agent-logs">
                            <div class="log-line success">[12:34:21] Generated Requirement interface</div>
                            <div class="log-line success">[12:34:22] Created validation schemas</div>
                            <div class="log-line success">[12:34:23] Added TypeScript types</div>
                        </div>
                    </div>

                    <div class="agent-card active">
                        <div class="agent-header">
                            <div class="agent-name">Agent-Design</div>
                            <div class="agent-status-icon active"></div>
                        </div>
                        <div class="agent-task">‚ö° Generating database schema...</div>
                        <div class="agent-files">
                            Files: 001_initial_schema.sql, indexes.sql
                        </div>
                        <div class="agent-logs">
                            <div class="log-line">[12:35:10] Analyzing requirements...</div>
                            <div class="log-line">[12:35:15] Creating tables schema...</div>
                            <div class="log-line">[12:35:20] Optimizing indexes...</div>
                        </div>
                    </div>

                    <div class="agent-card">
                        <div class="agent-header">
                            <div class="agent-name">Agent-Code</div>
                            <div class="agent-status-icon"></div>
                        </div>
                        <div class="agent-task">Waiting for Phase 2...</div>
                        <div class="agent-files">
                            Files: --
                        </div>
                        <div class="agent-logs">
                            <div class="log-line">[12:30:00] Agent initialized</div>
                            <div class="log-line">[12:30:01] Awaiting design completion</div>
                        </div>
                    </div>

                    <div class="agent-card active">
                        <div class="agent-header">
                            <div class="agent-name">Agent-Test</div>
                            <div class="agent-status-icon active"></div>
                        </div>
                        <div class="agent-task">‚ö° Running test suite...</div>
                        <div class="agent-files">
                            Files: requirements.test.ts, links.test.ts
                        </div>
                        <div class="agent-logs">
                            <div class="log-line success">[12:36:00] Unit tests: 42/42 passing</div>
                            <div class="log-line warning">[12:36:05] Integration: 18/20 passing</div>
                            <div class="log-line">[12:36:10] Running E2E tests...</div>
                        </div>
                    </div>

                    <div class="agent-card">
                        <div class="agent-header">
                            <div class="agent-name">Agent-Deploy</div>
                            <div class="agent-status-icon"></div>
                        </div>
                        <div class="agent-task">Waiting for Phase 4...</div>
                        <div class="agent-files">
                            Files: --
                        </div>
                        <div class="agent-logs">
                            <div class="log-line">[12:30:00] Agent initialized</div>
                            <div class="log-line">[12:30:01] CI/CD pipeline ready</div>
                        </div>
                    </div>

                    <div class="agent-card active">
                        <div class="agent-header">
                            <div class="agent-name">Agent-API</div>
                            <div class="agent-status-icon active"></div>
                        </div>
                        <div class="agent-task">‚ö° Writing API endpoints...</div>
                        <div class="agent-files">
                            Files: requirements.controller.ts, routes.ts
                        </div>
                        <div class="agent-logs">
                            <div class="log-line success">[12:35:30] GET /requirements created</div>
                            <div class="log-line success">[12:35:32] POST /requirements created</div>
                            <div class="log-line">[12:35:35] Adding validation middleware...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Generated Artifacts -->
            <div class="section">
                <div class="section-title">üì¶ Generated Artifacts</div>
                <div class="artifacts-tree">
                    <div class="tree-folder" onclick="toggleFolder(this)">/.conductor</div>
                    <div class="tree-file" onclick="showFile('state.json')">state.json</div>
                    <div class="tree-file" onclick="showFile('progress.md')">progress.md</div>
                    <div class="tree-file" onclick="showFile('dashboard.md')">dashboard.md</div>

                    <div class="tree-folder" onclick="toggleFolder(this)">/docker</div>
                    <div class="tree-file" onclick="showFile('docker-compose.yml')">docker-compose.yml</div>
                    <div class="tree-file" onclick="showFile('Dockerfile')">Dockerfile</div>

                    <div class="tree-folder" onclick="toggleFolder(this)">/src/models</div>
                    <div class="tree-file" onclick="showFile('requirement.ts')">requirement.ts</div>
                    <div class="tree-file" onclick="showFile('link.ts')">link.ts</div>
                    <div class="tree-file" onclick="showFile('audit.ts')">audit.ts</div>

                    <div class="tree-folder" onclick="toggleFolder(this)">/src/services</div>
                    <div class="tree-file" onclick="showFile('requirements.service.ts')">requirements.service.ts</div>
                    <div class="tree-file" onclick="showFile('links.service.ts')">links.service.ts</div>
                    <div class="tree-file" onclick="showFile('websocket.service.ts')">websocket.service.ts</div>

                    <div class="tree-folder" onclick="toggleFolder(this)">/src/controllers</div>
                    <div class="tree-file" onclick="showFile('requirements.controller.ts')">requirements.controller.ts</div>
                    <div class="tree-file" onclick="showFile('links.controller.ts')">links.controller.ts</div>

                    <div class="tree-folder" onclick="toggleFolder(this)">/tests/unit</div>
                    <div class="tree-file" onclick="showFile('requirements.test.ts')">requirements.test.ts</div>
                    <div class="tree-file" onclick="showFile('links.test.ts')">links.test.ts</div>

                    <div class="tree-folder" onclick="toggleFolder(this)">/tests/integration</div>
                    <div class="tree-file" onclick="showFile('api.test.ts')">api.test.ts</div>
                    <div class="tree-file" onclick="showFile('websocket.test.ts')">websocket.test.ts</div>
                </div>
                <div style="margin-top: 15px; text-align: center;">
                    <button class="control-button secondary" onclick="downloadArtifacts()">
                        üì• Download All Artifacts
                    </button>
                </div>
            </div>
        </div>

        <!-- Test Results & Deployment -->
        <div class="main-grid">
            <!-- Test Results -->
            <div class="section">
                <div class="section-title">üß™ Test Results Dashboard</div>
                <div class="test-summary">
                    <div class="test-stat passing">
                        <div class="test-stat-value">42/42</div>
                        <div class="test-stat-label">Unit Tests</div>
                    </div>
                    <div class="test-stat failing">
                        <div class="test-stat-value">18/20</div>
                        <div class="test-stat-label">Integration Tests</div>
                    </div>
                    <div class="test-stat failing">
                        <div class="test-stat-value">8/10</div>
                        <div class="test-stat-label">E2E Tests</div>
                    </div>
                    <div class="test-stat coverage">
                        <div class="test-stat-value">87%</div>
                        <div class="test-stat-label">Coverage</div>
                    </div>
                </div>
                <div class="test-details">
                    <div class="test-suite">
                        <div class="test-suite-header">Unit Tests - Requirements Service</div>
                        <div class="test-case pass">‚úì Should create requirement with valid data</div>
                        <div class="test-case pass">‚úì Should validate required fields</div>
                        <div class="test-case pass">‚úì Should generate unique IDs</div>
                        <div class="test-case pass">‚úì Should handle pagination correctly</div>
                    </div>
                    <div class="test-suite">
                        <div class="test-suite-header">Integration Tests - API Endpoints</div>
                        <div class="test-case pass">‚úì GET /api/v1/requirements returns 200</div>
                        <div class="test-case pass">‚úì POST /api/v1/requirements creates record</div>
                        <div class="test-case fail" onclick="showTestError('validation')">‚úó PUT /api/v1/requirements/:id validation fails</div>
                        <div class="test-case fail" onclick="showTestError('auth')">‚úó DELETE /api/v1/requirements/:id auth check</div>
                    </div>
                    <div class="test-suite">
                        <div class="test-suite-header">E2E Tests - User Workflows</div>
                        <div class="test-case pass">‚úì User can create and edit requirement</div>
                        <div class="test-case pass">‚úì User can link requirements</div>
                        <div class="test-case fail" onclick="showTestError('websocket')">‚úó Real-time updates propagate correctly</div>
                        <div class="test-case pass">‚úì User can export requirements to PDF</div>
                    </div>
                </div>
                <div style="margin-top: 15px; text-align: center;">
                    <button class="control-button secondary" onclick="retryFailedTests()">
                        üîÑ Re-run Failed Tests
                    </button>
                </div>
            </div>

            <!-- Deployment Status -->
            <div class="section">
                <div class="section-title">üöÄ Deployment Status</div>
                <div class="health-grid">
                    <div class="health-item healthy">
                        <div class="health-icon">üóÑÔ∏è</div>
                        <div class="health-info">
                            <div class="health-name">Database</div>
                            <div class="health-status">Connected ‚Ä¢ PostgreSQL 15</div>
                        </div>
                    </div>
                    <div class="health-item healthy">
                        <div class="health-icon">‚ö°</div>
                        <div class="health-info">
                            <div class="health-name">Redis</div>
                            <div class="health-status">Connected ‚Ä¢ 7.2-alpine</div>
                        </div>
                    </div>
                    <div class="health-item healthy">
                        <div class="health-icon">üåê</div>
                        <div class="health-info">
                            <div class="health-name">Server</div>
                            <div class="health-status">Running ‚Ä¢ Port 3000</div>
                        </div>
                    </div>
                    <div class="health-item healthy">
                        <div class="health-icon">‚úÖ</div>
                        <div class="health-info">
                            <div class="health-name">API Health</div>
                            <div class="health-status">200 OK ‚Ä¢ All endpoints</div>
                        </div>
                    </div>
                </div>
                <div class="deployment-log">
                    <div class="log-line">[12:30:00] Starting deployment pipeline...</div>
                    <div class="log-line success">[12:30:05] ‚úì Building Docker image...</div>
                    <div class="log-line success">[12:30:45] ‚úì Image built: conductor:latest</div>
                    <div class="log-line success">[12:31:00] ‚úì Starting containers...</div>
                    <div class="log-line success">[12:31:15] ‚úì PostgreSQL ready</div>
                    <div class="log-line success">[12:31:20] ‚úì Redis ready</div>
                    <div class="log-line success">[12:31:25] ‚úì Running migrations...</div>
                    <div class="log-line success">[12:31:40] ‚úì Migrations complete (5 applied)</div>
                    <div class="log-line success">[12:31:45] ‚úì Starting Express server...</div>
                    <div class="log-line success">[12:31:50] ‚úì Server listening on port 3000</div>
                    <div class="log-line success">[12:31:55] ‚úì WebSocket server initialized</div>
                    <div class="log-line success">[12:32:00] ‚úì Health check passed ‚úÖ</div>
                    <div class="log-line">[12:32:05] Deployment complete! System ready.</div>
                </div>
            </div>
        </div>

        <!-- API Explorer -->
        <div class="section">
            <div class="section-title">üîå Live API Testing</div>
            <div class="api-explorer">
                <div class="api-request">
                    <span class="api-method">GET</span>
                    <span class="api-endpoint">/api/v1/requirements</span>
                    <button class="api-try-button" onclick="tryAPI('GET', '/api/v1/requirements')">Try it now</button>
                    <div id="response-get" class="api-response" style="display: none;"></div>
                </div>
                <div class="api-request">
                    <span class="api-method post">POST</span>
                    <span class="api-endpoint">/api/v1/requirements</span>
                    <button class="api-try-button" onclick="tryAPI('POST', '/api/v1/requirements')">Try it now</button>
                    <div id="response-post" class="api-response" style="display: none;"></div>
                </div>
                <div class="api-request">
                    <span class="api-method">GET</span>
                    <span class="api-endpoint">/api/v1/requirements/:id</span>
                    <button class="api-try-button" onclick="tryAPI('GET', '/api/v1/requirements/REQ-001')">Try it now</button>
                    <div id="response-get-id" class="api-response" style="display: none;"></div>
                </div>
                <div style="margin-top: 15px; text-align: center;">
                    <button class="control-button secondary" onclick="openSwagger()">
                        üìö View Swagger/OpenAPI Docs
                    </button>
                </div>
            </div>
        </div>

        <!-- Control Panel -->
        <div class="control-panel">
            <button class="control-button" onclick="startImplementation()">
                ‚ñ∂Ô∏è Start Implementation
            </button>
            <button class="control-button secondary" onclick="pauseImplementation()">
                ‚è∏Ô∏è Pause
            </button>
            <button class="control-button secondary" onclick="skipPhase()">
                ‚è≠Ô∏è Skip to Next Phase
            </button>
            <button class="control-button secondary" onclick="retryFailedTests()">
                üîÑ Re-run Failed Tests
            </button>
            <button class="control-button secondary" onclick="downloadArtifacts()">
                üì¶ Download Artifacts
            </button>
            <button class="control-button" onclick="deployProduction()">
                üöÄ Deploy to Production
            </button>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div id="modal-body"></div>
        </div>
    </div>

    <script>
        // Matrix Rain Background
        const canvas = document.getElementById('matrix-bg');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const chars = '01„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ„Çø„ÉÅ„ÉÑ„ÉÜ„Éà';
        const fontSize = 14;
        const columns = canvas.width / fontSize;
        const drops = Array(Math.floor(columns)).fill(1);

        function drawMatrix() {
            ctx.fillStyle = 'rgba(10, 10, 10, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#00ff41';
            ctx.font = `${fontSize}px monospace`;

            for (let i = 0; i < drops.length; i++) {
                const text = chars[Math.floor(Math.random() * chars.length)];
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }

        setInterval(drawMatrix, 50);

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // Simulate Live Updates
        let phaseProgress = {
            0: 100, 1: 100, 2: 67, 3: 0, 4: 0, 5: 0
        };

        function updatePhases() {
            // Simulate Phase 2 progress
            if (phaseProgress[2] < 100) {
                phaseProgress[2] += Math.random() * 5;
                if (phaseProgress[2] > 100) phaseProgress[2] = 100;

                const phase2 = document.querySelector('[data-phase="2"]');
                const progressBar = phase2.querySelector('.progress-fill');
                progressBar.style.width = phaseProgress[2] + '%';

                if (phaseProgress[2] >= 100) {
                    phase2.classList.remove('in-progress');
                    phase2.classList.add('complete');
                    phase2.querySelector('.phase-status').textContent = 'Complete';

                    // Start Phase 3
                    setTimeout(() => {
                        const phase3 = document.querySelector('[data-phase="3"]');
                        phase3.classList.add('in-progress');
                        phase3.querySelector('.phase-status').textContent = 'In Progress';
                        launchConfetti();
                    }, 1000);
                }
            }

            // Simulate Phase 3 progress
            if (phaseProgress[2] >= 100 && phaseProgress[3] < 100) {
                phaseProgress[3] += Math.random() * 3;
                if (phaseProgress[3] > 100) phaseProgress[3] = 100;

                const phase3 = document.querySelector('[data-phase="3"]');
                const progressBar = phase3.querySelector('.progress-fill');
                progressBar.style.width = phaseProgress[3] + '%';
            }
        }

        setInterval(updatePhases, 2000);

        // Agent Log Simulation
        const agentLogs = [
            { agent: 'Agent-Design', message: 'Optimizing table relationships...', type: '' },
            { agent: 'Agent-API', message: 'Adding error handling middleware...', type: '' },
            { agent: 'Agent-Test', message: 'Coverage increased to 88%', type: 'success' },
            { agent: 'Agent-Requirements', message: 'Validation schemas complete', type: 'success' }
        ];

        let logIndex = 0;
        function addAgentLog() {
            const log = agentLogs[logIndex % agentLogs.length];
            const cards = document.querySelectorAll('.agent-card');

            cards.forEach(card => {
                const name = card.querySelector('.agent-name').textContent;
                if (name === log.agent) {
                    const logsDiv = card.querySelector('.agent-logs');
                    const time = new Date().toLocaleTimeString('en-US', { hour12: false });
                    const newLog = document.createElement('div');
                    newLog.className = `log-line ${log.type}`;
                    newLog.textContent = `[${time}] ${log.message}`;
                    logsDiv.insertBefore(newLog, logsDiv.firstChild);

                    // Keep only last 3 logs
                    while (logsDiv.children.length > 3) {
                        logsDiv.removeChild(logsDiv.lastChild);
                    }
                }
            });

            logIndex++;
        }

        setInterval(addAgentLog, 5000);

        // Modal Functions
        function showModal(title, content) {
            const modal = document.getElementById('modal');
            const modalBody = document.getElementById('modal-body');
            modalBody.innerHTML = `<h2>${title}</h2><pre>${content}</pre>`;
            modal.style.display = 'block';
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        window.onclick = function(event) {
            const modal = document.getElementById('modal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        // File Viewer
        function showFile(filename) {
            const fileContents = {
                'state.json': `{
  "currentPhase": 2,
  "completedPhases": [0, 1],
  "startTime": "2025-09-30T12:30:00Z",
  "agents": {
    "Agent-Requirements": "complete",
    "Agent-Design": "in-progress",
    "Agent-Code": "pending"
  }
}`,
                'requirement.ts': `export interface Requirement {
  id: string;
  title: string;
  description: string;
  priority: 'low' | 'medium' | 'high';
  status: RequirementStatus;
  createdAt: Date;
  updatedAt: Date;
  createdBy: string;
  version: number;
}

export enum RequirementStatus {
  DRAFT = 'draft',
  REVIEW = 'review',
  APPROVED = 'approved',
  IMPLEMENTED = 'implemented'
}`,
                'docker-compose.yml': `version: '3.8'
services:
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: conductor
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: secret
    ports:
      - "5432:5432"

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

  app:
    build: .
    ports:
      - "3000:3000"
    depends_on:
      - postgres
      - redis`
            };

            const content = fileContents[filename] || `// Content of ${filename}\n// Generated by Project Conductor`;
            showModal(filename, content);
        }

        function showLogs(phase) {
            const logs = `[Phase ${phase} Execution Logs]\n\n` +
                `12:30:00 - Initializing phase...\n` +
                `12:30:05 - Loading configuration...\n` +
                `12:30:10 - Starting agent deployment...\n` +
                `12:30:15 - Agent initialized successfully\n` +
                `12:30:20 - Beginning task execution...\n` +
                `12:30:30 - Task 1/5 complete\n` +
                `12:30:45 - Task 2/5 complete\n` +
                `12:31:00 - Task 3/5 complete\n` +
                `12:31:20 - Task 4/5 complete\n` +
                `12:31:40 - Task 5/5 complete\n` +
                `12:31:45 - Phase validation starting...\n` +
                `12:31:50 - All tests passed\n` +
                `12:31:55 - Phase ${phase} COMPLETE ‚úì`;
            showModal(`${phase} Logs`, logs);
        }

        function showTestError(type) {
            const errors = {
                'validation': `AssertionError: Expected status 400, got 500

  at test/integration/api.test.ts:45:12

Request: PUT /api/v1/requirements/REQ-001
Body: { "title": "" }
Expected: 400 Bad Request (validation error)
Actual: 500 Internal Server Error

Stack trace:
  ValidationError: Title cannot be empty
    at RequirementsService.validate (src/services/requirements.service.ts:123)`,
                'auth': `AssertionError: Expected status 401, got 200

  at test/integration/api.test.ts:67:12

Request: DELETE /api/v1/requirements/REQ-001
Headers: {} (no auth token)
Expected: 401 Unauthorized
Actual: 200 OK (deleted without auth check!)

Security Issue: Authentication middleware not applied to DELETE route`,
                'websocket': `TimeoutError: WebSocket event not received within 5000ms

  at test/e2e/realtime.test.ts:89:15

Expected Event: requirement:updated
Event Data: { id: 'REQ-001', title: 'New Title' }
Received: (no events)

Possible causes:
  - WebSocket connection not established
  - Event emission not triggered
  - Room broadcasting issue`
            };

            showModal('Test Failure Details', errors[type] || 'Error details not available');
        }

        // API Testing
        function tryAPI(method, endpoint) {
            const responses = {
                'GET-/api/v1/requirements': {
                    success: true,
                    data: [
                        { id: 'REQ-001', title: 'User Authentication', priority: 'high', status: 'approved' },
                        { id: 'REQ-002', title: 'Dashboard UI', priority: 'medium', status: 'review' },
                        { id: 'REQ-003', title: 'Export to PDF', priority: 'low', status: 'draft' }
                    ],
                    total: 3,
                    page: 1,
                    limit: 10
                },
                'POST-/api/v1/requirements': {
                    success: true,
                    data: {
                        id: 'REQ-004',
                        title: 'New Requirement',
                        priority: 'medium',
                        status: 'draft',
                        createdAt: new Date().toISOString()
                    },
                    message: 'Requirement created successfully'
                },
                'GET-/api/v1/requirements/REQ-001': {
                    success: true,
                    data: {
                        id: 'REQ-001',
                        title: 'User Authentication',
                        description: 'Implement JWT-based authentication system',
                        priority: 'high',
                        status: 'approved',
                        createdAt: '2025-09-30T10:00:00Z',
                        updatedAt: '2025-09-30T12:00:00Z',
                        createdBy: 'admin@conductor.dev',
                        version: 2
                    }
                }
            };

            const key = `${method}-${endpoint}`;
            const responseDiv = document.getElementById(`response-${method.toLowerCase()}${endpoint.includes(':id') ? '-id' : ''}`);

            if (responseDiv) {
                responseDiv.style.display = 'block';
                responseDiv.textContent = 'Loading...';

                setTimeout(() => {
                    responseDiv.textContent = JSON.stringify(responses[key] || { error: 'Not found' }, null, 2);
                }, 500);
            }
        }

        // Control Panel Actions
        function startImplementation() {
            alert('üöÄ Implementation pipeline started!\n\nAll agents are now executing in parallel.\nWatch the real-time updates above.');
            launchConfetti();
        }

        function pauseImplementation() {
            alert('‚è∏Ô∏è Implementation paused.\n\nAll agents will complete their current tasks and then halt.');
        }

        function skipPhase() {
            alert('‚è≠Ô∏è Skipping to next phase...\n\nWarning: This may result in incomplete artifacts.');
        }

        function retryFailedTests() {
            alert('üîÑ Re-running failed tests...\n\nCheck the Test Results Dashboard for updates.');
        }

        function downloadArtifacts() {
            alert('üì• Downloading all generated artifacts...\n\nFiles will be packaged as conductor-artifacts.zip');
        }

        function deployProduction() {
            if (confirm('üöÄ Deploy to Production?\n\nThis will:\n- Build production Docker image\n- Run full test suite\n- Deploy to production servers\n- Configure monitoring\n\nContinue?')) {
                alert('‚úÖ Deployment initiated!\n\nRedirecting to Module 5: Deployment & Monitoring...');
                // In real app: window.location.href = 'module-5-deployment.html';
            }
        }

        function openSwagger() {
            alert('üìö Opening Swagger/OpenAPI documentation...\n\nURL: http://localhost:3000/api-docs');
        }

        // Confetti Animation
        function launchConfetti() {
            const colors = ['#00ff41', '#00ccff', '#ff9900', '#ff0044'];
            const count = 50;

            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * window.innerWidth + 'px';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(confetti);

                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }

        // Tree Navigation
        function toggleFolder(element) {
            // Simple toggle - in real app, would show/hide children
            element.style.color = element.style.color === 'rgb(255, 153, 0)' ? '#00ccff' : '#ff9900';
        }

        // Initial load animation
        window.addEventListener('load', () => {
            setTimeout(() => {
                addAgentLog();
            }, 1000);
        });
    </script>

    <!-- State Synchronization -->
    <!-- Backend Integration -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="/demo/api-client.js"></script>
    <script src="/demo/websocket-client.js"></script>


    <script src="/demo/module-state-sync.js"></script>
    <script>
        // Initialize state sync for Module 4
        ConductorModuleState.init(4);

        // Listen for state updates from dashboard
        ConductorModuleState.onStateUpdate((detail) => {
            console.log('[Module 4] State updated from dashboard:', detail);
        });

        // Save implementation progress to state
        function saveImplementationState() {
            ConductorModuleState.updateState({
                implementationProgress: 'in_progress',
                lastActivity: new Date().toISOString()
            }, { saveImmediately: true });
        }

        // Auto-save on activity
        setInterval(saveImplementationState, 30000); // Every 30 seconds

        console.log('[Module 4] State synchronization initialized');
    </script>
</body>
</html>