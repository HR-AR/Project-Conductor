<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Conductor - Business Problem ‚Üí Aligned PRD Orchestration</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #1e293b;
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 3rem;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
        }

        .control-panel {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }

        .controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
        }

        .btn.secondary {
            background: linear-gradient(135deg, #64748b 0%, #475569 100%);
        }

        .main-container {
            display: grid;
            grid-template-columns: 350px 1fr 350px;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .panel {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .panel h3 {
            margin-bottom: 1.5rem;
            color: #1e293b;
            font-size: 1.2rem;
        }

        /* Business Problem Input */
        .problem-card {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .problem-card:hover {
            border-color: #3b82f6;
            transform: translateX(5px);
        }

        .problem-card.active {
            border-color: #3b82f6;
            background: #eff6ff;
        }

        .problem-title {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 0.5rem;
        }

        .problem-desc {
            font-size: 0.9rem;
            color: #64748b;
        }

        /* Orchestration Pipeline */
        .orchestration-panel {
            background: white;
            border-radius: 12px;
            padding: 2rem;
        }

        .phase-pipeline {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3rem;
            position: relative;
        }

        .phase-pipeline::before {
            content: '';
            position: absolute;
            top: 40px;
            left: 60px;
            right: 60px;
            height: 2px;
            background: #e2e8f0;
            z-index: 0;
        }

        .phase-node {
            background: white;
            border: 3px solid #e2e8f0;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
            transition: all 0.3s ease;
        }

        .phase-node.active {
            border-color: #3b82f6;
            background: #eff6ff;
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }

        .phase-node.complete {
            border-color: #10b981;
            background: #d1fae5;
        }

        .phase-icon {
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
        }

        .phase-label {
            font-size: 0.7rem;
            text-align: center;
            font-weight: 600;
        }

        /* Stakeholder Section */
        .stakeholder-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stakeholder-card {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            transition: all 0.3s ease;
        }

        .stakeholder-card.active {
            border-color: #3b82f6;
            background: #eff6ff;
        }

        .stakeholder-card.aligned {
            border-color: #10b981;
            background: #d1fae5;
        }

        .stakeholder-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .stakeholder-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .stakeholder-name {
            font-weight: 600;
            color: #1e293b;
        }

        .stakeholder-role {
            font-size: 0.8rem;
            color: #64748b;
        }

        .stakeholder-status {
            margin-top: 0.5rem;
            font-size: 0.85rem;
            color: #64748b;
        }

        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 0.5rem;
        }

        .status-indicator.reviewing { background: #f59e0b; }
        .status-indicator.aligned { background: #10b981; }
        .status-indicator.pending { background: #94a3b8; }

        /* Requirements Stream */
        .requirements-stream {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 1rem;
        }

        .requirement-item {
            background: #f8fafc;
            border-left: 3px solid #3b82f6;
            padding: 1rem;
            margin-bottom: 0.75rem;
            border-radius: 4px;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .requirement-item.functional { border-left-color: #3b82f6; }
        .requirement-item.technical { border-left-color: #8b5cf6; }
        .requirement-item.business { border-left-color: #f59e0b; }
        .requirement-item.constraint { border-left-color: #ef4444; }

        .req-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .req-id {
            font-weight: 600;
            color: #3b82f6;
        }

        .req-type {
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
            background: #e2e8f0;
            border-radius: 4px;
        }

        .req-content {
            color: #475569;
            margin-bottom: 0.5rem;
        }

        .req-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.85rem;
            color: #94a3b8;
        }

        /* PRD Output */
        .prd-section {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .prd-section.complete {
            border-color: #10b981;
            background: #f0fdf4;
        }

        .prd-section h4 {
            color: #1e293b;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .prd-content {
            color: #475569;
            line-height: 1.6;
        }

        /* Progress Bar */
        .progress-container {
            background: #e2e8f0;
            border-radius: 8px;
            height: 8px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            transition: width 0.5s ease;
        }

        /* Chat/Comments */
        .chat-container {
            background: #f8fafc;
            border-radius: 8px;
            padding: 1rem;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 1rem;
        }

        .chat-message {
            margin-bottom: 1rem;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .chat-author {
            font-weight: 600;
            color: #3b82f6;
            margin-bottom: 0.25rem;
        }

        .chat-text {
            color: #475569;
            font-size: 0.9rem;
        }

        .chat-time {
            color: #94a3b8;
            font-size: 0.8rem;
            margin-top: 0.25rem;
        }

        /* Metrics */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-top: 2rem;
        }

        .metric-card {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: #3b82f6;
        }

        .metric-label {
            font-size: 0.85rem;
            color: #64748b;
            margin-top: 0.25rem;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-left: 4px solid #3b82f6;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: slideInRight 0.5s ease-out;
            z-index: 1000;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Project Conductor</h1>
            <p class="subtitle">Transform Business Problems into Aligned Product Requirements</p>
            <p style="margin-top: 1rem; opacity: 0.8;">
                Watch as stakeholder input becomes a complete, aligned PRD
            </p>
        </div>

        <div class="control-panel">
            <div class="controls">
                <button class="btn" onclick="startOrchestration()">üöÄ Start PRD Orchestration</button>
                <button class="btn" onclick="simulateStakeholderInput()">üí¨ Add Stakeholder Input</button>
                <button class="btn" onclick="triggerAlignment()">ü§ù Trigger Alignment</button>
                <button class="btn" onclick="generatePRD()">üìÑ Generate Final PRD</button>
                <button class="btn secondary" onclick="reset()">üîÑ Reset Demo</button>
            </div>
        </div>

        <div class="main-container">
            <!-- Business Problems -->
            <div class="panel">
                <h3>üìä Business Problems</h3>
                <div id="businessProblems">
                    <div class="problem-card" onclick="selectProblem(this, 'ecommerce')">
                        <div class="problem-title">Low Conversion Rate</div>
                        <div class="problem-desc">
                            Cart abandonment at 68%, losing $2M annually. Need better checkout experience.
                        </div>
                    </div>
                    <div class="problem-card" onclick="selectProblem(this, 'analytics')">
                        <div class="problem-title">No Customer Insights</div>
                        <div class="problem-desc">
                            Can't track user behavior. Making decisions blind. Need analytics platform.
                        </div>
                    </div>
                    <div class="problem-card" onclick="selectProblem(this, 'mobile')">
                        <div class="problem-title">Missing Mobile Revenue</div>
                        <div class="problem-desc">
                            60% traffic is mobile but no app. Competitors taking market share.
                        </div>
                    </div>
                </div>

                <h3 style="margin-top: 2rem;">üë• Stakeholders</h3>
                <div class="stakeholder-grid">
                    <div class="stakeholder-card" id="stake-product">
                        <div class="stakeholder-header">
                            <div class="stakeholder-avatar">JC</div>
                            <div>
                                <div class="stakeholder-name">John Chen</div>
                                <div class="stakeholder-role">Product Owner</div>
                            </div>
                        </div>
                        <div class="stakeholder-status">
                            <span class="status-indicator pending"></span>
                            <span id="status-product">Pending input</span>
                        </div>
                    </div>
                    <div class="stakeholder-card" id="stake-tech">
                        <div class="stakeholder-header">
                            <div class="stakeholder-avatar">ST</div>
                            <div>
                                <div class="stakeholder-name">Sarah Taylor</div>
                                <div class="stakeholder-role">Tech Lead</div>
                            </div>
                        </div>
                        <div class="stakeholder-status">
                            <span class="status-indicator pending"></span>
                            <span id="status-tech">Pending input</span>
                        </div>
                    </div>
                    <div class="stakeholder-card" id="stake-business">
                        <div class="stakeholder-header">
                            <div class="stakeholder-avatar">MK</div>
                            <div>
                                <div class="stakeholder-name">Mike Kim</div>
                                <div class="stakeholder-role">Business Analyst</div>
                            </div>
                        </div>
                        <div class="stakeholder-status">
                            <span class="status-indicator pending"></span>
                            <span id="status-business">Pending input</span>
                        </div>
                    </div>
                    <div class="stakeholder-card" id="stake-ux">
                        <div class="stakeholder-header">
                            <div class="stakeholder-avatar">LP</div>
                            <div>
                                <div class="stakeholder-name">Lisa Park</div>
                                <div class="stakeholder-role">UX Designer</div>
                            </div>
                        </div>
                        <div class="stakeholder-status">
                            <span class="status-indicator pending"></span>
                            <span id="status-ux">Pending input</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Orchestration Pipeline -->
            <div class="orchestration-panel">
                <h3 style="text-align: center; margin-bottom: 2rem;">Requirements Orchestration Pipeline</h3>

                <div class="phase-pipeline">
                    <div class="phase-node" id="phase-discover">
                        <div class="phase-icon">üîç</div>
                        <div class="phase-label">Discover</div>
                    </div>
                    <div class="phase-node" id="phase-analyze">
                        <div class="phase-icon">üìä</div>
                        <div class="phase-label">Analyze</div>
                    </div>
                    <div class="phase-node" id="phase-define">
                        <div class="phase-icon">üìù</div>
                        <div class="phase-label">Define</div>
                    </div>
                    <div class="phase-node" id="phase-refine">
                        <div class="phase-icon">‚ú®</div>
                        <div class="phase-label">Refine</div>
                    </div>
                    <div class="phase-node" id="phase-align">
                        <div class="phase-icon">ü§ù</div>
                        <div class="phase-label">Align</div>
                    </div>
                    <div class="phase-node" id="phase-finalize">
                        <div class="phase-icon">‚úÖ</div>
                        <div class="phase-label">Finalize</div>
                    </div>
                </div>

                <h4 style="margin-bottom: 1rem;">üìã Requirements Stream</h4>
                <div class="requirements-stream" id="requirementsStream">
                    <p style="text-align: center; color: #94a3b8; padding: 2rem;">
                        Requirements will appear here as stakeholders provide input...
                    </p>
                </div>

                <h4 style="margin-top: 2rem; margin-bottom: 1rem;">üí¨ Collaboration Feed</h4>
                <div class="chat-container" id="chatContainer">
                    <div class="chat-message">
                        <div class="chat-author">System</div>
                        <div class="chat-text">Ready to begin requirements orchestration.</div>
                        <div class="chat-time">Just now</div>
                    </div>
                </div>

                <div class="progress-container">
                    <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value" id="metricRequirements">0</div>
                        <div class="metric-label">Requirements</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="metricStakeholders">0/4</div>
                        <div class="metric-label">Aligned</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="metricConflicts">0</div>
                        <div class="metric-label">Conflicts</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="metricProgress">0%</div>
                        <div class="metric-label">Complete</div>
                    </div>
                </div>
            </div>

            <!-- PRD Output -->
            <div class="panel">
                <h3>üìÑ Product Requirements Document</h3>
                <div id="prdOutput">
                    <div class="prd-section">
                        <h4>üìå Executive Summary</h4>
                        <div class="prd-content" id="prd-summary">
                            <em style="color: #94a3b8;">Awaiting problem selection and stakeholder input...</em>
                        </div>
                    </div>
                    <div class="prd-section">
                        <h4>üéØ Business Objectives</h4>
                        <div class="prd-content" id="prd-objectives">
                            <em style="color: #94a3b8;">Will be generated from business problem analysis...</em>
                        </div>
                    </div>
                    <div class="prd-section">
                        <h4>‚úÖ Functional Requirements</h4>
                        <div class="prd-content" id="prd-functional">
                            <em style="color: #94a3b8;">Will be compiled from stakeholder requirements...</em>
                        </div>
                    </div>
                    <div class="prd-section">
                        <h4>‚öôÔ∏è Technical Requirements</h4>
                        <div class="prd-content" id="prd-technical">
                            <em style="color: #94a3b8;">Will be defined by technical stakeholders...</em>
                        </div>
                    </div>
                    <div class="prd-section">
                        <h4>üö´ Constraints & Assumptions</h4>
                        <div class="prd-content" id="prd-constraints">
                            <em style="color: #94a3b8;">Will be identified during analysis...</em>
                        </div>
                    </div>
                    <div class="prd-section">
                        <h4>üìä Success Metrics</h4>
                        <div class="prd-content" id="prd-metrics">
                            <em style="color: #94a3b8;">Will be aligned with business objectives...</em>
                        </div>
                    </div>
                    <div class="prd-section">
                        <h4>‚úçÔ∏è Stakeholder Sign-offs</h4>
                        <div class="prd-content" id="prd-signoffs">
                            <em style="color: #94a3b8;">Awaiting stakeholder alignment...</em>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedProblem = null;
        let requirements = [];
        let alignedStakeholders = 0;
        let currentPhase = null;
        let orchestrationRunning = false;

        // Show notification
        function notify(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }

        // Add chat message
        function addChat(author, text) {
            const container = document.getElementById('chatContainer');
            const message = document.createElement('div');
            message.className = 'chat-message';
            message.innerHTML = `
                <div class="chat-author">${author}</div>
                <div class="chat-text">${text}</div>
                <div class="chat-time">${new Date().toLocaleTimeString()}</div>
            `;
            container.appendChild(message);
            container.scrollTop = container.scrollHeight;
        }

        // Select problem
        function selectProblem(element, type) {
            document.querySelectorAll('.problem-card').forEach(card => {
                card.classList.remove('active');
            });
            element.classList.add('active');
            selectedProblem = type;
            notify('Business problem selected: ' + element.querySelector('.problem-title').textContent);
            addChat('System', 'Business problem identified. Ready for stakeholder input.');
        }

        // Start orchestration
        function startOrchestration() {
            if (!selectedProblem) {
                notify('Please select a business problem first');
                return;
            }

            orchestrationRunning = true;
            currentPhase = 'discover';

            // Animate phases
            const phases = ['discover', 'analyze', 'define', 'refine', 'align', 'finalize'];
            let phaseIndex = 0;

            notify('Starting PRD orchestration...');
            addChat('Conductor', 'Initiating requirements discovery phase...');

            const phaseInterval = setInterval(() => {
                // Clear previous active
                document.querySelectorAll('.phase-node').forEach(node => {
                    node.classList.remove('active');
                });

                // Mark current as active
                const currentNode = document.getElementById(`phase-${phases[phaseIndex]}`);
                currentNode.classList.add('active');

                // Complete previous
                if (phaseIndex > 0) {
                    const prevNode = document.getElementById(`phase-${phases[phaseIndex - 1]}`);
                    prevNode.classList.add('complete');
                }

                // Update progress
                const progress = ((phaseIndex + 1) / phases.length) * 100;
                document.getElementById('progressBar').style.width = `${progress}%`;
                document.getElementById('metricProgress').textContent = `${Math.round(progress)}%`;

                // Trigger phase actions
                executePhase(phases[phaseIndex]);

                phaseIndex++;
                if (phaseIndex >= phases.length) {
                    clearInterval(phaseInterval);
                    document.getElementById(`phase-${phases[phases.length - 1]}`).classList.add('complete');
                    notify('PRD Orchestration Complete!');
                    addChat('Conductor', '‚úÖ PRD finalized and ready for review.');
                }
            }, 2000);
        }

        // Execute phase
        function executePhase(phase) {
            switch(phase) {
                case 'discover':
                    addChat('Conductor', 'Discovering business context and constraints...');
                    addRequirement('FUNC', 'Streamlined checkout process', 'Product');
                    break;
                case 'analyze':
                    addChat('Conductor', 'Analyzing stakeholder inputs and dependencies...');
                    addRequirement('TECH', 'API response time < 200ms', 'Tech Lead');
                    break;
                case 'define':
                    addChat('Conductor', 'Defining clear requirements from inputs...');
                    addRequirement('BUS', 'Reduce cart abandonment by 40%', 'Business');
                    break;
                case 'refine':
                    addChat('Conductor', 'Refining requirements with NLP analysis...');
                    addRequirement('UX', 'Mobile-first responsive design', 'UX');
                    updatePRDSection('functional');
                    break;
                case 'align':
                    addChat('Conductor', 'Aligning all stakeholders on requirements...');
                    alignStakeholders();
                    updatePRDSection('technical');
                    break;
                case 'finalize':
                    addChat('Conductor', 'Finalizing PRD with full traceability...');
                    finalizePRD();
                    break;
            }
        }

        // Add requirement
        function addRequirement(type, content, author) {
            const stream = document.getElementById('requirementsStream');

            if (requirements.length === 0) {
                stream.innerHTML = '';
            }

            const typeMap = {
                'FUNC': 'functional',
                'TECH': 'technical',
                'BUS': 'business',
                'UX': 'functional'
            };

            const req = document.createElement('div');
            req.className = `requirement-item ${typeMap[type]}`;
            req.innerHTML = `
                <div class="req-header">
                    <span class="req-id">REQ-${String(requirements.length + 1).padStart(3, '0')}</span>
                    <span class="req-type">${type}</span>
                </div>
                <div class="req-content">${content}</div>
                <div class="req-meta">
                    <span>üë§ ${author}</span>
                    <span>üìÖ ${new Date().toLocaleTimeString()}</span>
                </div>
            `;
            stream.appendChild(req);

            requirements.push({ type, content, author });
            document.getElementById('metricRequirements').textContent = requirements.length;
        }

        // Simulate stakeholder input
        function simulateStakeholderInput() {
            const inputs = [
                { stake: 'product', author: 'John Chen', text: 'We need one-click checkout like Amazon' },
                { stake: 'tech', author: 'Sarah Taylor', text: 'Must integrate with existing payment gateway' },
                { stake: 'business', author: 'Mike Kim', text: 'Target 25% conversion rate improvement' },
                { stake: 'ux', author: 'Lisa Park', text: 'Minimize cognitive load, max 3 steps to purchase' }
            ];

            inputs.forEach((input, index) => {
                setTimeout(() => {
                    const card = document.getElementById(`stake-${input.stake}`);
                    card.classList.add('active');
                    document.getElementById(`status-${input.stake}`).textContent = 'Reviewing requirements';

                    addChat(input.author, input.text);

                    setTimeout(() => {
                        card.classList.remove('active');
                        card.classList.add('aligned');
                        document.getElementById(`status-${input.stake}`).textContent = 'Input provided';
                    }, 1000);
                }, index * 1500);
            });
        }

        // Trigger alignment
        function triggerAlignment() {
            addChat('Conductor', 'ü§ù Initiating stakeholder alignment process...');

            setTimeout(() => {
                document.getElementById('metricConflicts').textContent = '2';
                addChat('Conductor', '‚ö†Ô∏è Detected 2 conflicts in requirements. Resolving...');
            }, 500);

            setTimeout(() => {
                document.getElementById('metricConflicts').textContent = '0';
                addChat('Conductor', '‚úÖ All conflicts resolved through negotiation.');
                alignStakeholders();
            }, 2000);
        }

        // Align stakeholders
        function alignStakeholders() {
            const stakeholders = ['product', 'tech', 'business', 'ux'];
            stakeholders.forEach(stake => {
                const card = document.getElementById(`stake-${stake}`);
                card.classList.add('aligned');
                document.getElementById(`status-${stake}`).textContent = 'Aligned ‚úÖ';
            });

            alignedStakeholders = 4;
            document.getElementById('metricStakeholders').textContent = '4/4';
        }

        // Update PRD section
        function updatePRDSection(section) {
            const content = {
                functional: `
                    ‚Ä¢ One-click checkout for returning customers<br>
                    ‚Ä¢ Guest checkout option without account creation<br>
                    ‚Ä¢ Auto-saved cart across sessions<br>
                    ‚Ä¢ Multiple payment methods (Card, PayPal, Apple Pay)<br>
                    ‚Ä¢ Real-time inventory validation
                `,
                technical: `
                    ‚Ä¢ API response time < 200ms for all endpoints<br>
                    ‚Ä¢ PCI DSS compliance for payment processing<br>
                    ‚Ä¢ 99.9% uptime SLA<br>
                    ‚Ä¢ Support for 10,000 concurrent users<br>
                    ‚Ä¢ Integration with Stripe and PayPal APIs
                `
            };

            if (content[section]) {
                document.getElementById(`prd-${section}`).innerHTML = content[section];
                document.querySelector(`#prd-${section}`).parentElement.classList.add('complete');
            }
        }

        // Generate PRD
        function generatePRD() {
            if (requirements.length < 4) {
                notify('Need more stakeholder input to generate PRD');
                return;
            }

            addChat('Conductor', 'üìÑ Generating comprehensive PRD...');
            finalizePRD();
        }

        // Finalize PRD
        function finalizePRD() {
            const sections = {
                summary: 'Implement a streamlined checkout process to reduce cart abandonment from 68% to 40%, recovering $1.2M in annual revenue.',
                objectives: '‚Ä¢ Increase conversion rate by 25%<br>‚Ä¢ Reduce checkout time to under 60 seconds<br>‚Ä¢ Support mobile commerce growth',
                constraints: '‚Ä¢ Must work with existing payment gateway<br>‚Ä¢ Budget limit: $500K<br>‚Ä¢ Timeline: Q2 2024 delivery<br>‚Ä¢ No changes to core inventory system',
                metrics: '‚Ä¢ Conversion rate: 25% improvement<br>‚Ä¢ Cart abandonment: < 40%<br>‚Ä¢ Checkout time: < 60 seconds<br>‚Ä¢ Customer satisfaction: > 4.5/5',
                signoffs: '‚úÖ John Chen - Product Owner<br>‚úÖ Sarah Taylor - Tech Lead<br>‚úÖ Mike Kim - Business Analyst<br>‚úÖ Lisa Park - UX Designer'
            };

            Object.keys(sections).forEach(section => {
                document.getElementById(`prd-${section}`).innerHTML = sections[section];
                document.querySelector(`#prd-${section}`).parentElement.classList.add('complete');
            });

            notify('PRD Complete - Ready for Development Team!');
        }

        // Reset
        function reset() {
            orchestrationRunning = false;
            selectedProblem = null;
            requirements = [];
            alignedStakeholders = 0;
            currentPhase = null;

            // Reset UI
            document.querySelectorAll('.problem-card, .stakeholder-card, .phase-node, .prd-section').forEach(el => {
                el.classList.remove('active', 'complete', 'aligned');
            });

            document.getElementById('requirementsStream').innerHTML = '<p style="text-align: center; color: #94a3b8; padding: 2rem;">Requirements will appear here as stakeholders provide input...</p>';
            document.getElementById('chatContainer').innerHTML = '<div class="chat-message"><div class="chat-author">System</div><div class="chat-text">Ready to begin requirements orchestration.</div><div class="chat-time">Just now</div></div>';

            // Reset metrics
            document.getElementById('metricRequirements').textContent = '0';
            document.getElementById('metricStakeholders').textContent = '0/4';
            document.getElementById('metricConflicts').textContent = '0';
            document.getElementById('metricProgress').textContent = '0%';
            document.getElementById('progressBar').style.width = '0%';

            // Reset PRD
            const prdSections = ['summary', 'objectives', 'functional', 'technical', 'constraints', 'metrics', 'signoffs'];
            prdSections.forEach(section => {
                const placeholder = {
                    summary: 'Awaiting problem selection and stakeholder input...',
                    objectives: 'Will be generated from business problem analysis...',
                    functional: 'Will be compiled from stakeholder requirements...',
                    technical: 'Will be defined by technical stakeholders...',
                    constraints: 'Will be identified during analysis...',
                    metrics: 'Will be aligned with business objectives...',
                    signoffs: 'Awaiting stakeholder alignment...'
                };
                document.getElementById(`prd-${section}`).innerHTML = `<em style="color: #94a3b8;">${placeholder[section]}</em>`;
            });

            // Reset stakeholder status
            ['product', 'tech', 'business', 'ux'].forEach(stake => {
                document.getElementById(`status-${stake}`).textContent = 'Pending input';
            });
        }
    </script>
</body>
</html>